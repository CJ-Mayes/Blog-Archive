<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>It&amp;#x27;s Transfer Season (Python) - CJ Mayes</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        *,::after,::before{
            box-sizing: border-box;
        }
        body,html{
            font-family: "Plus Jakarta Sans", sans-serif;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
            -webkit-tap-highlight-color: transparent;
            margin: 0;
            padding: 0;
            font-weight: 400;
            line-height: 1.5;
            font-size: 15px;
            color: #212529;
            word-wrap: break-word;
        }
        html{
            overflow-x: hidden;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        header {
            border-bottom: 1px solid #e9ecef;
            padding: 30px 0;
            margin-bottom: 40px;
        }
        header h1 {
            font-size: 32px;
            font-weight: 600;
            margin: 0;
            color: #212529;
        }
        header h1 a {
            color: #212529;
            text-decoration: none;
        }
        header h1 a:hover {
            opacity: 0.8;
        }
        header p {
            margin: 8px 0 0 0;
            font-size: 15px;
            color: #6c757d;
            font-weight: 400;
        }
        nav {
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 1px solid #e9ecef;
        }
        nav a {
            color: #212529;
            text-decoration: none;
            font-size: 15px;
            font-weight: 500;
            margin-right: 30px;
            transition: opacity 0.2s;
        }
        nav a:hover {
            opacity: 0.7;
        }
        main {
            margin-bottom: 60px;
        }
        article {
            max-width: 800px;
            margin: 0 auto;
        }
        article h1 {
            font-size: 36px;
            font-weight: 600;
            margin-bottom: 24px;
            color: #212529;
            line-height: 1.2;
        }
        article h2 {
            font-size: 28px;
            font-weight: 600;
            margin-top: 40px;
            margin-bottom: 16px;
            color: #212529;
            line-height: 1.3;
        }
        article h3 {
            font-size: 22px;
            font-weight: 600;
            margin-top: 32px;
            margin-bottom: 12px;
            color: #212529;
        }
        article p {
            margin-bottom: 16px;
            font-size: 15px;
            line-height: 1.6;
            color: #212529;
        }
        article img, article figure {
            max-width: 100%;
            height: auto;
            margin: 32px 0;
            border-radius: 4px;
        }
        article figure {
            margin: 32px 0;
        }
        article figure img {
            display: block;
            margin: 0 auto;
        }
        article a {
            color: #212529;
            text-decoration: underline;
            text-decoration-color: #6c757d;
            text-underline-offset: 3px;
        }
        article a:hover {
            text-decoration-color: #212529;
        }
        footer {
            text-align: center;
            padding: 40px 20px;
            margin-top: 60px;
            border-top: 1px solid #e9ecef;
            color: #6c757d;
            font-size: 14px;
        }
        .post-list {
            list-style: none;
            padding: 0;
        }
        .post-list li {
            margin-bottom: 32px;
            padding-bottom: 32px;
            border-bottom: 1px solid #e9ecef;
        }
        .post-list li:last-child {
            border-bottom: none;
        }
        .post-list h2 {
            margin-bottom: 8px;
            font-size: 22px;
        }
        .post-list a {
            color: #212529;
            text-decoration: none;
        }
        .post-list a:hover {
            text-decoration: underline;
            text-decoration-color: #212529;
        }
        .post-list p {
            color: #6c757d;
            font-size: 14px;
            margin-top: 8px;
        }
        @media (max-width: 768px) {
            .container {
                padding: 20px 15px;
            }
            article h1 {
                font-size: 28px;
            }
            article h2 {
                font-size: 24px;
            }
            header h1 {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1><a href="blog.html">CJ Mayes</a></h1>
                <p>London, United Kingdom</p>
        </div>
    </header>
    
    <div class="container">
        <nav>
            <a href="blog.html">Blog</a>
        </nav>
        
        <main>
            <article>
                <h1>It&#x27;s Transfer Season (Python)</h1><p>Hi All,</p>
<p>With the end of the transfer season, I thought it would be good to do a quick code share on how to look at transfer data.</p>
<p>For this tutorial we look at a previous season, 2022, and solely the winter transfers within the Premier league.</p>
<p><img class="alignnone size-full wp-image-7558" src="../uploads/2023/12/Screenshot-2023-12-21-at-14.05.57.png" alt="" width="1388" height="922" /></p>
<p>Here is the website screen shot of Transfermarkt and the filters we are looking at of Winter and year 22/23.</p>
<p>Notice that this is a little more challenging to previous weeks because we have the club name now in a banner, and the associated details below.</p>
<p><img class="alignnone size-full wp-image-7560" src="../uploads/2023/12/Screenshot-2023-12-21-at-14.06.06.png" alt="" width="1376" height="1090" /></p>
<p>We also have sections that are whether the play was "in" or "out", i.e arriving or departing the club.</p>
<p>What does the code do in general?</p>
<p>This Python script is a web scraper designed to extract information about Premier League football transfers from the Transfermarkt website. The script utilizes the <code>requests</code> library to send HTTP requests, the <code>BeautifulSoup</code> library to parse HTML content, and the <code>pandas</code> library to organize the collected data into a DataFrame. The target information includes details about incoming and outgoing transfers for each Premier League team, such as player names, ages, nationalities, positions, market values, and transfer fees.</p>
<p>The script begins by sending a request to the specified URL, which contains data on Premier League transfers for the 2022 season. It then extracts the list of teams from the page and filters out any empty strings. After that, it defines a function (<code>extract_player_data</code>) to extract player information for a given team, considering both incoming and outgoing transfers. The script then iterates through each team, finds the relevant HTML elements for incoming and outgoing transfers, and uses the function to extract and store the player data in a list (<code>all_player_data</code>).</p>
<p>Finally, the script creates a pandas DataFrame from the accumulated player data, defines column names, and prints the DataFrame to the console. Additionally, it exports the DataFrame to a CSV file named 'transfer_data.csv' in the current working directory, providing a structured and tabular representation of the Premier League transfer information.</p>
<p><img class="alignnone size-full wp-image-7562" src="../uploads/2023/12/carbon-1-1.png" alt="" width="1628" height="2874" /></p>
<p>I've added this example file transfer_data for the 22/23 winter transfer season to the repo.</p>
<p>I will leave it to you to try find this seasons transfers!</p>
<p><strong>Bonus:</strong></p>
<p>I've added some additional code that loops through multiple years, (both summer and winter) transfers. I've added this to the repository for years from 2000- before the transfer season started in January. This will be the "TwentyYearsPLTransfers.py" &amp; corresponding 20Y_PL_transfer_data.csv dataset.</p>
<p><strong>Going Further:</strong></p>
<ul>
<li>Why not try collate data for another league?</li>
<li>Why not try visualise flow of individuals between clubs?</li>
</ul>
<p>If you are looking for the art of what is possible, why not check out this dashboard by Ben Norland looking at football transfer flows. It's a pretty awesome chord diagram!</p>
<p><img class="alignnone size-full wp-image-7583" src="../uploads/2024/02/Transfer-Flows-1.png" alt="" width="1199" height="799" /></p>
<p>As always, Let me know how you get on with this one. I can be reached on <strong>Twitter</strong>, <strong>@_CJMayes</strong>.</p>

<p><strong>LOGGING OFF,</strong></p>

<p><strong>CJ</strong></p>
            </article>
        </main>
    </div>
    
    <footer>
        <p>&copy; 2025 CJ Mayes. All rights reserved.</p>
    </footer>
</body>
</html>