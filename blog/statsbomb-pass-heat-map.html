<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StatsBomb Pass Heat Map (Python) - CJ Mayes</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        *,::after,::before{
            box-sizing: border-box;
        }
        body,html{
            font-family: "Plus Jakarta Sans", sans-serif;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
            -webkit-tap-highlight-color: transparent;
            margin: 0;
            padding: 0;
            font-weight: 400;
            line-height: 1.5;
            font-size: 15px;
            color: #212529;
            word-wrap: break-word;
        }
        html{
            overflow-x: hidden;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        header {
            border-bottom: 1px solid #e9ecef;
            padding: 30px 0;
            margin-bottom: 40px;
        }
        header h1 {
            font-size: 32px;
            font-weight: 600;
            margin: 0;
            color: #212529;
        }
        header h1 a {
            color: #212529;
            text-decoration: none;
        }
        header h1 a:hover {
            opacity: 0.8;
        }
        header p {
            margin: 8px 0 0 0;
            font-size: 15px;
            color: #6c757d;
            font-weight: 400;
        }
        nav {
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 1px solid #e9ecef;
        }
        nav a {
            color: #212529;
            text-decoration: none;
            font-size: 15px;
            font-weight: 500;
            margin-right: 30px;
            transition: opacity 0.2s;
        }
        nav a:hover {
            opacity: 0.7;
        }
        main {
            margin-bottom: 60px;
        }
        article {
            max-width: 800px;
            margin: 0 auto;
        }
        article h1 {
            font-size: 36px;
            font-weight: 600;
            margin-bottom: 24px;
            color: #212529;
            line-height: 1.2;
        }
        article h2 {
            font-size: 28px;
            font-weight: 600;
            margin-top: 40px;
            margin-bottom: 16px;
            color: #212529;
            line-height: 1.3;
        }
        article h3 {
            font-size: 22px;
            font-weight: 600;
            margin-top: 32px;
            margin-bottom: 12px;
            color: #212529;
        }
        article p {
            margin-bottom: 16px;
            font-size: 15px;
            line-height: 1.6;
            color: #212529;
        }
        article img, article figure {
            max-width: 100%;
            height: auto;
            margin: 32px 0;
            border-radius: 4px;
        }
        article figure {
            margin: 32px 0;
        }
        article figure img {
            display: block;
            margin: 0 auto;
        }
        article a {
            color: #212529;
            text-decoration: underline;
            text-decoration-color: #6c757d;
            text-underline-offset: 3px;
        }
        article a:hover {
            text-decoration-color: #212529;
        }
        footer {
            text-align: center;
            padding: 40px 20px;
            margin-top: 60px;
            border-top: 1px solid #e9ecef;
            color: #6c757d;
            font-size: 14px;
        }
        .post-list {
            list-style: none;
            padding: 0;
        }
        .post-list li {
            margin-bottom: 32px;
            padding-bottom: 32px;
            border-bottom: 1px solid #e9ecef;
        }
        .post-list li:last-child {
            border-bottom: none;
        }
        .post-list h2 {
            margin-bottom: 8px;
            font-size: 22px;
        }
        .post-list a {
            color: #212529;
            text-decoration: none;
        }
        .post-list a:hover {
            text-decoration: underline;
            text-decoration-color: #212529;
        }
        .post-list p {
            color: #6c757d;
            font-size: 14px;
            margin-top: 8px;
        }
        @media (max-width: 768px) {
            .container {
                padding: 20px 15px;
            }
            article h1 {
                font-size: 28px;
            }
            article h2 {
                font-size: 24px;
            }
            header h1 {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1><a href="blog.html">CJ Mayes</a></h1>
                <p>London, United Kingdom</p>
        </div>
    </header>
    
    <div class="container">
        <nav>
            <a href="blog.html">Blog</a>
        </nav>
        
        <main>
            <article>
                <h1>StatsBomb Pass Heat Map (Python)</h1><p>Hi all,</p>
<p>The festive period is slowly creeping up on us! I hope everyone finds time with friends, family and loved ones to recharge and reconnect.</p>
<p>The blog today will look at an introduction to StatsBomb data and how to create your own heat-map of pass data in python. In the new year, we will probably look to replicate the same idea in Tableau.</p>
<p>If you are new to the open data, take a look at a previous introduction blog I wrote last year,<a href="../2021/12/15/statsbomb-intro-sportsvizsunday/"><strong> here.</strong></a></p>
<p>All <strong>code resources</strong>, can be found at the top of the page below the title.</p>
<p>Here is the repo for the <strong><a href="https://github.com/statsbomb/open-data" target="_blank" rel="noreferrer noopener">open data</a></strong>. We’ll actually be using a package that stores this information but it will be useful as a reference point as we dive in, so will look to explore the folder structure. As we will be using a prebuilt package there is no requirement to download this repo specifically.</p>
<p>I've chosen to plot the Womens euro's final - specifically the passes of the England team. Let's walk through the code snippets so you can go ahead and create your own.</p>
<p><img class="wp-image-5264 aligncenter" src="../uploads/2022/12/carbon-5-300x217.png" alt="" width="521" height="377" /></p>
<p>The first block of code looks at the packages we require. I then create two simple datasets, the first is a csv version of what competition data is available from statsbomb through their open data. I then pick the specific ID and season which equates to the Womens Euro Finals.</p>
<p>The actual final between England and Germany is a specific match id. The final line of code here, looks to create a dataframe of all the different events captured within that match.</p>
<p><img class="wp-image-5268 aligncenter" src="../uploads/2022/12/carbon-6-300x131.png" alt="" width="474" height="207" /></p>
<p>The next few lines of code above are important in terms of splitting the location field out into its x and y co-ordinates. You'll notice here we also limit the type of event to Pass and the team to only the England team. Of course these steps are optional based on what measure you're looking at, but the syntax of splitting the field will be important.</p>
<p><img class="wp-image-5270 aligncenter" src="../uploads/2022/12/carbon-7-297x300.png" alt="" width="523" height="529" /></p>
<p>So this next chunk of code is a little meaty but hopefully we can make sense of it.</p>
<p>To start we define the figure size of the pitch, and we give it a few attributes in terms of style and colours.</p>
<p>I then want to create a variety of different style heatmaps, to weigh up which ones may be the best representation of my data. You'll see the number of bins is equal to my layout. I.e I have 4 sets of bins, as well as a layout of 1x4 meaning my overall chart will be 4 pitches next to one another, with the heatmaps based on the bin sizes.</p>
<p>The for loop creates each of our heatmaps.</p>
<p>First it takes the pass co-ordinates of the x and y and bins them into their corresponding category.</p>
<p>Next we use the scatter function to also overlay our co-ordinates.</p>
<p>Finally I add some labelling calculations to see what % of passes were made within that specific bin.</p>
<p>All goes well, the visualisation should appear.</p>
<p><img class="wp-image-5274 aligncenter" src="../uploads/2022/12/Screenshot-2022-12-02-at-20.37.22-300x53.png" alt="" width="722" height="127" /></p>
<p>Now seeing the input, it may help you with understanding the bin values.</p>
<p>Thats the end to the visualisation.</p>
<p>Of course, you can go back and amend labelling and colours and sizes to your own discretion. Do check out the mplsoccer documentation <a href="https://mplsoccer.readthedocs.io/en/latest/mplsoccer.pitch.html"><strong>here.</strong></a></p>
<p>As well as some of the different colour mappings <a href="https://matplotlib.org/stable/tutorials/colors/colormaps.html"><strong>here.</strong></a></p>
<p>If you get stuck with the layout of the above,</p>
<p>I also left in a chunk of code that looks to build just one chart.</p>
<p><img class="wp-image-5278 aligncenter" src="../uploads/2022/12/carbon-9-300x200.png" alt="" width="497" height="331" /></p>
<p>This code takes the original x and y location data based on passes sets them equal to new values and then passes those through the bin statistic and heatmap position functions. Notice a few small changes including ax=ax as we only have one single chart.</p>
<p>The chart type in the second example tends to be used more for pressure events. If you'd like to follow the mplsoccer version of the code where they utilise pressure events, please follow this <strong><a href="https://mplsoccer.readthedocs.io/en/latest/gallery/pitch_plots/plot_heatmap_positional.html#sphx-glr-gallery-pitch-plots-plot-heatmap-positional-py">link.</a></strong></p>
<p>Another good follow along tutorial can be found <strong><a href="https://mplsoccer.readthedocs.io/en/latest/gallery/pitch_plots/plot_heatmap.html">here.</a></strong></p>
<p><img class="wp-image-5280 aligncenter" src="../uploads/2022/12/Figure_2-300x225.png" alt="" width="468" height="351" /></p>
<p>Let me know how you get on with this one. As always the code can be found at the top of the page in the Github Repo.</p>
<p>

</p>
<p><strong>LOGGING OFF,<br />CJ</strong></p>
<p></p>
            </article>
        </main>
    </div>
    
    <footer>
        <p>&copy; 2025 CJ Mayes. All rights reserved.</p>
    </footer>
</body>
</html>